<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunica√ß√£o SSL - Ferramenta Educativa</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .step-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .step-btn {
            padding: 12px 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .step-btn:hover, .step-btn.active {
            background: rgba(255,255,255,0.9);
            color: #333;
            transform: translateY(-2px);
        }

        .step-content {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            display: none;
        }

        .step-content.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .visual-demo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            position: relative;
        }

        .device {
            width: 120px;
            height: 80px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            position: relative;
        }

        .client {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
        }

        .server {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .connection-line {
            flex: 1;
            height: 4px;
            margin: 0 20px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .data-flow {
            position: absolute;
            width: 20px;
            height: 100%;
            background: rgba(255,255,255,0.8);
            border-radius: 2px;
            animation: flow 2s linear infinite;
        }

        @keyframes flow {
            0% { left: -20px; }
            100% { left: 100%; }
        }

        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-example::before {
            content: attr(data-language);
            position: absolute;
            top: 10px;
            right: 15px;
            background: #4a5568;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .simulate-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 15px 0;
        }

        .simulate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .result-box {
            background: #f0fff4;
            border: 2px solid #68d391;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .certificate-visual {
            background: #fff;
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(255,215,0,0.3);
        }

        .security-indicator {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
            margin: 5px;
        }

        .secure {
            background: #c6f6d5;
            color: #22543d;
        }

        .warning {
            background: #fed7d7;
            color: #742a2a;
        }

        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #3182ce;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            background: #e2e8f0;
            border: none;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .visual-demo {
                flex-direction: column;
                gap: 20px;
            }
            
            .connection-line {
                width: 100px;
                margin: 0;
                transform: rotate(90deg);
            }
            
            .step-navigation {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîê Comunica√ß√£o SSL</h1>
            <p>Ferramenta Educativa Interativa</p>
        </div>

        <div class="step-navigation">
            <button class="step-btn active" onclick="showStep(1)">1. Gerar Certificados</button>
            <button class="step-btn" onclick="showStep(2)">2. Configurar Servidor</button>
            <button class="step-btn" onclick="showStep(3)">3. Configurar Cliente</button>
            <button class="step-btn" onclick="showStep(4)">4. Testar Conex√£o</button>
            <button class="step-btn" onclick="showStep(5)">5. Manuten√ß√£o</button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- Etapa 1: Gerar Certificados -->
        <div class="step-content active" id="step1">
            <h2>üéØ Etapa 1: Gerar Certificados SSL</h2>
            
            <div class="info-box">
                <strong>O que s√£o certificados SSL?</strong><br>
                Certificados SSL s√£o arquivos digitais que cont√™m chaves criptogr√°ficas que estabelecem uma conex√£o segura entre um servidor e um cliente.
            </div>

            <div class="certificate-visual">
                <h3>üìú Estrutura do Certificado</h3>
                <p><strong>Chave P√∫blica:</strong> Para criptografar dados</p>
                <p><strong>Chave Privada:</strong> Para descriptografar dados</p>
                <p><strong>Informa√ß√µes de Identidade:</strong> CN, OU, O, C</p>
                <p><strong>Per√≠odo de Validade:</strong> Data in√≠cio/fim</p>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('openssl-tab', this)">OpenSSL</button>
                <button class="tab" onclick="showTab('java-tab', this)">Java Keytool</button>
                <button class="tab" onclick="showTab('nodejs-tab', this)">Node.js</button>
            </div>

            <div class="tab-content active" id="openssl-tab">
                <div class="code-example" data-language="bash">
# 1. Gerar chave privada
openssl genrsa -out server.key 2048

# 2. Gerar certificado auto-assinado
openssl req -new -x509 -key server.key -out server.crt -days 365 \
  -subj "/C=BR/ST=SP/L=SaoPaulo/O=MinhaEmpresa/OU=TI/CN=localhost"

# 3. Verificar certificado
openssl x509 -in server.crt -text -noout
                </div>
            </div>

            <div class="tab-content" id="java-tab">
                <div class="code-example" data-language="bash">
# Gerar keystore Java
keytool -genkeypair -alias servidor \
  -keyalg RSA -keysize 2048 \
  -dname "CN=localhost,OU=TI,O=MinhaEmpresa,L=SaoPaulo,ST=SP,C=BR" \
  -keystore servidor.jks -storepass senha123 \
  -validity 365

# Exportar certificado
keytool -export -alias servidor -file servidor.cer \
  -keystore servidor.jks -storepass senha123
                </div>
            </div>

            <div class="tab-content" id="nodejs-tab">
                <div class="code-example" data-language="javascript">
const forge = require('node-forge');

// Gerar par de chaves
const keys = forge.pki.rsa.generateKeyPair(2048);

// Criar certificado
const cert = forge.pki.createCertificate();
cert.publicKey = keys.publicKey;
cert.serialNumber = '01';
cert.validity.notBefore = new Date();
cert.validity.notAfter = new Date();
cert.validity.notAfter.setFullYear(cert.validity.notBefore.getFullYear() + 1);

const attrs = [{
  name: 'commonName',
  value: 'localhost'
}, {
  name: 'countryName',
  value: 'BR'
}, {
  shortName: 'ST',
  value: 'SP'
}];

cert.setSubject(attrs);
cert.setIssuer(attrs);
cert.sign(keys.privateKey);

// Converter para PEM
const pemCert = forge.pki.certificateToPem(cert);
const pemKey = forge.pki.privateKeyToPem(keys.privateKey);
                </div>
            </div>

            <button class="simulate-btn" onclick="simulateStep1()">üîß Simular Gera√ß√£o de Certificado</button>
            <div class="result-box" id="result1">
                <h4>‚úÖ Certificado Gerado com Sucesso!</h4>
                <p><strong>Arquivos criados:</strong></p>
                <ul>
                    <li>server.key (Chave privada)</li>
                    <li>server.crt (Certificado p√∫blico)</li>
                </ul>
                <div class="security-indicator secure">üîí Certificado V√°lido por 365 dias</div>
            </div>
        </div>

        <!-- Etapa 2: Configurar Servidor -->
        <div class="step-content" id="step2">
            <h2>üñ•Ô∏è Etapa 2: Configurar o Servidor SSL</h2>

            <div class="visual-demo">
                <div class="device server">SERVIDOR<br>HTTPS</div>
                <div class="connection-line">
                    <div class="data-flow"></div>
                </div>
                <div class="device client">AGUARDANDO<br>CONEX√ïES</div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('nodejs-server', this)">Node.js</button>
                <button class="tab" onclick="showTab('python-server', this)">Python</button>
                <button class="tab" onclick="showTab('java-server', this)">Java</button>
            </div>

            <div class="tab-content active" id="nodejs-server">
                <div class="code-example" data-language="javascript">
const https = require('https');
const fs = require('fs');

// Carregar certificados
const options = {
  key: fs.readFileSync('server.key'),
  cert: fs.readFileSync('server.crt'),
  // Configura√ß√µes de seguran√ßa
  secureProtocol: 'TLSv1_2_method',
  ciphers: 'ECDHE-RSA-AES128-GCM-SHA256:!RC4:!MD5:!aNULL:!eNULL',
  honorCipherOrder: true
};

// Criar servidor HTTPS
const server = https.createServer(options, (req, res) => {
  res.writeHead(200, {'Content-Type': 'application/json'});
  res.end(JSON.stringify({
    message: 'Conex√£o SSL estabelecida com sucesso!',
    timestamp: new Date().toISOString(),
    cipher: req.socket.getCipher()
  }));
});

server.listen(443, () => {
  console.log('Servidor SSL rodando na porta 443');
});
                </div>
            </div>

            <div class="tab-content" id="python-server">
                <div class="code-example" data-language="python">
import ssl
import socket
from http.server import HTTPServer, BaseHTTPRequestHandler
import json

class SSLHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header('Content-type', 'application/json')
        self.end_headers()
        
        response = {
            'message': 'Conex√£o SSL estabelecida com sucesso!',
            'cipher': self.connection.cipher()[0] if hasattr(self.connection, 'cipher') else 'N/A'
        }
        self.wfile.write(json.dumps(response).encode())

# Configurar contexto SSL
context = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)
context.load_cert_chain('server.crt', 'server.key')

# Criar servidor
httpd = HTTPServer(('localhost', 443), SSLHandler)
httpd.socket = context.wrap_socket(httpd.socket, server_side=True)

print("Servidor SSL rodando na porta 443")
httpd.serve_forever()
                </div>
            </div>

            <div class="tab-content" id="java-server">
                <div class="code-example" data-language="java">
import javax.net.ssl.*;
import java.io.*;
import java.security.*;

public class SSLServer {
    public static void main(String[] args) throws Exception {
        // Configurar keystore
        System.setProperty("javax.net.ssl.keyStore", "servidor.jks");
        System.setProperty("javax.net.ssl.keyStorePassword", "senha123");
        
        // Configurar TLS
        SSLContext sslContext = SSLContext.getInstance("TLS");
        KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
        KeyStore ks = KeyStore.getInstance("JKS");
        
        ks.load(new FileInputStream("servidor.jks"), "senha123".toCharArray());
        kmf.init(ks, "senha123".toCharArray());
        sslContext.init(kmf.getKeyManagers(), null, null);
        
        // Criar servidor
        SSLServerSocketFactory factory = sslContext.getServerSocketFactory();
        SSLServerSocket serverSocket = (SSLServerSocket) factory.createServerSocket(443);
        
        System.out.println("Servidor SSL rodando na porta 443");
        
        while (true) {
            SSLSocket clientSocket = (SSLSocket) serverSocket.accept();
            // Processar conex√£o cliente...
        }
    }
}
                </div>
            </div>

            <button class="simulate-btn" onclick="simulateStep2()">üöÄ Simular Servidor SSL</button>
            <div class="result-box" id="result2">
                <h4>‚úÖ Servidor SSL Configurado!</h4>
                <p><strong>Status:</strong> Aguardando conex√µes na porta 443</p>
                <div class="security-indicator secure">üîí TLS 1.2 Ativado</div>
                <div class="security-indicator secure">üõ°Ô∏è Ciphers Seguros Configurados</div>
            </div>
        </div>

        <!-- Etapa 3: Configurar Cliente -->
        <div class="step-content" id="step3">
            <h2>üíª Etapa 3: Configurar o Cliente SSL</h2>

            <div class="visual-demo">
                <div class="device client">CLIENTE<br>HTTPS</div>
                <div class="connection-line">
                    <div class="data-flow"></div>
                </div>
                <div class="device server">SERVIDOR<br>SSL</div>
            </div>

            <div class="info-box">
                <strong>Importante:</strong> O cliente precisa confiar no certificado do servidor. Para certificados auto-assinados, voc√™ pode desabilitar a verifica√ß√£o (apenas para desenvolvimento!).
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('nodejs-client', this)">Node.js</button>
                <button class="tab" onclick="showTab('python-client', this)">Python</button>
                <button class="tab" onclick="showTab('curl-client', this)">cURL</button>
            </div>

            <div class="tab-content active" id="nodejs-client">
                <div class="code-example" data-language="javascript">
const https = require('https');
const fs = require('fs');

// Op√ß√µes do cliente SSL
const options = {
  hostname: 'localhost',
  port: 443,
  path: '/',
  method: 'GET',
  // Para certificados auto-assinados (apenas desenvolvimento!)
  rejectUnauthorized: false,
  // Ou especificar o CA personalizado:
  // ca: fs.readFileSync('server.crt')
};

// Fazer requisi√ß√£o HTTPS
const req = https.request(options, (res) => {
  console.log('Status:', res.statusCode);
  console.log('Cipher:', res.socket.getCipher());
  
  let data = '';
  res.on('data', (chunk) => {
    data += chunk;
  });
  
  res.on('end', () => {
    console.log('Resposta:', JSON.parse(data));
  });
});

req.on('error', (e) => {
  console.error('Erro:', e.message);
});

req.end();
                </div>
            </div>

            <div class="tab-content" id="python-client">
                <div class="code-example" data-language="python">
import ssl
import urllib.request
import json

# Criar contexto SSL
context = ssl.create_default_context()
# Para certificados auto-assinados (apenas desenvolvimento!)
context.check_hostname = False
context.verify_mode = ssl.CERT_NONE

# Ou carregar certificado espec√≠fico:
# context.load_verify_locations('server.crt')

try:
    # Fazer requisi√ß√£o HTTPS
    with urllib.request.urlopen('https://localhost:443', context=context) as response:
        data = response.read().decode()
        result = json.loads(data)
        
        print(f"Status: {response.status}")
        print(f"Resposta: {result}")
        
        # Informa√ß√µes do SSL
        ssl_info = response.fp.raw._ssl_obj.cipher()
        print(f"Cipher: {ssl_info[0]} - {ssl_info[1]}")
        
except Exception as e:
    print(f"Erro: {e}")
                </div>
            </div>

            <div class="tab-content" id="curl-client">
                <div class="code-example" data-language="bash">
# Testar com cURL

# Para certificados auto-assinados (ignorar verifica√ß√£o)
curl -k https://localhost:443

# Ou especificar o certificado CA
curl --cacert server.crt https://localhost:443

# Mostrar informa√ß√µes detalhadas do SSL
curl -k -v https://localhost:443

# Testar apenas o handshake SSL
openssl s_client -connect localhost:443 -servername localhost
                </div>
            </div>

            <button class="simulate-btn" onclick="simulateStep3()">üîó Simular Cliente SSL</button>
            <div class="result-box" id="result3">
                <h4>‚úÖ Cliente SSL Conectado!</h4>
                <p><strong>Handshake SSL:</strong> Conclu√≠do com sucesso</p>
                <p><strong>Cipher:</strong> ECDHE-RSA-AES128-GCM-SHA256</p>
                <div class="security-indicator secure">üîí Conex√£o Criptografada</div>
            </div>
        </div>

        <!-- Etapa 4: Testar Conex√£o -->
        <div class="step-content" id="step4">
            <h2>üß™ Etapa 4: Testar a Conex√£o SSL</h2>

            <div class="visual-demo">
                <div class="device client">CLIENTE<br>üîí TLS</div>
                <div class="connection-line">
                    <div class="data-flow"></div>
                </div>
                <div class="device server">SERVIDOR<br>üîí TLS</div>
            </div>

            <h3>üîç Verifica√ß√µes de Seguran√ßa</h3>

            <div class="tabs">
                <button class="tab active" onclick="showTab('ssl-test', this)">Teste SSL</button>
                <button class="tab" onclick="showTab('performance-test', this)">Performance</button>
                <button class="tab" onclick="showTab('security-test', this)">Seguran√ßa</button>
            </div>

            <div class="tab-content active" id="ssl-test">
                <div class="code-example" data-language="bash">
# Verificar certificado e configura√ß√£o SSL
openssl s_client -connect localhost:443 -servername localhost

# Testar protocolos suportados
nmap --script ssl-enum-ciphers -p 443 localhost

# Verificar data de expira√ß√£o
echo | openssl s_client -servername localhost -connect localhost:443 2>/dev/null | \
openssl x509 -noout -dates

# Testar vulnerabilidades conhecidas
testssl.sh localhost:443
                </div>

                <div class="info-box">
                    <strong>O que verificar:</strong><br>
                    ‚úÖ Certificado v√°lido e n√£o expirado<br>
                    ‚úÖ Protocolos seguros (TLS 1.2+)<br>
                    ‚úÖ Ciphers forte (sem RC4, MD5)<br>
                    ‚úÖ Handshake completo<br>
                    ‚úÖ Sem vulnerabilidades conhecidas
                </div>
            </div>

            <div class="tab-content" id="performance-test">
                <div class="code-example" data-language="bash">
# Teste de performance com Apache Bench
ab -n 1000 -c 10 https://localhost:443/

# Teste com wget
time wget --no-check-certificate https://localhost:443/

# Monitorar lat√™ncia do handshake
curl -w "@curl-format.txt" -o /dev/null -s https://localhost:443/

# Conte√∫do do curl-format.txt:
# time_namelookup:  %{time_namelookup}\n
# time_connect:     %{time_connect}\n
# time_appconnect:  %{time_appconnect}\n
# time_pretransfer: %{time_pretransfer}\n
# time_total:       %{time_total}\n
                </div>
            </div>

            <div class="tab-content" id="security-test">
                <div class="code-example" data-language="javascript">
// Script Node.js para teste de seguran√ßa
const https = require('https');
const tls = require('tls');

function testSSLSecurity(hostname, port) {
    console.log(`üîç Testando seguran√ßa SSL para ${hostname}:${port}`);
    
    const socket = tls.connect(port, hostname, {
        rejectUnauthorized: false
    }, () => {
        const cert = socket.getPeerCertificate();
        const cipher = socket.getCipher();
        
        console.log('üìú Certificado:');
        console.log(`  Subject: ${cert.subject.CN}`);
        console.log(`  Issuer: ${cert.issuer.CN}`);
        console.log(`  V√°lido at√©: ${cert.valid_to}`);
        
        console.log('üîê Cipher:');
        console.log(`  Nome: ${cipher.name}`);
        console.log(`  Vers√£o: ${cipher.version}`);
        
        console.log('üõ°Ô∏è Protocolo:', socket.getProtocol());
        
        socket.end();
    });
    
    socket.on('error', (err) => {
        console.error('‚ùå Erro SSL:', err.message);
    });
}

testSSLSecurity('localhost', 443);
                </div>
            </div>

            <button class="simulate-btn" onclick="simulateStep4()">üß™ Executar Testes SSL</button>
            <div class="result-box" id="result4">
                <h4>‚úÖ Testes SSL Conclu√≠dos!</h4>
                <p><strong>Resultados:</strong></p>
                <div class="security-indicator secure">üîí Certificado V√°lido</div>
                <div class="security-indicator secure">üìä Performance OK (< 100ms)</div>
                <div class="security-indicator secure">üõ°Ô∏è Sem Vulnerabilidades</div>
                <div class="security-indicator warning">‚ö†Ô∏è Certificado Auto-assinado</div>
            </div>
        </div>

        <!-- Etapa 5: Manuten√ß√£o -->
        <div class="step-content" id="step5">
            <h2>üîß Etapa 5: Manuten√ß√£o e Seguran√ßa</h2>

            <div class="info-box">
                <strong>Manuten√ß√£o cont√≠nua √© crucial!</strong><br>
                Certificados expiram, novas vulnerabilidades s√£o descobertas, e as melhores pr√°ticas evoluem.
            </div>

            <h3>üìÖ Cronograma de Manuten√ß√£o</h3>

            <div class="tabs">
                <button class="tab active" onclick="showTab('renewal-tab', this)">Renova√ß√£o</button>
                <button class="tab" onclick="showTab('monitoring-tab', this)">Monitoramento</button>
                <button class="tab" onclick="showTab('security-tab', this)">Seguran√ßa</button>
            </div>

            <div class="tab-content active" id="renewal-tab">
                <h4>üîÑ Renova√ß√£o de Certificados</h4>
                
                <div class="code-example" data-language="bash">
# Script de renova√ß√£o autom√°tica (Let's Encrypt)
#!/bin/bash

# Verificar expira√ß√£o
EXPIRE_DATE=$(openssl x509 -enddate -noout -in server.crt | cut -d= -f2)
EXPIRE_EPOCH=$(date -d "$EXPIRE_DATE" +%s)
NOW_EPOCH=$(date +%s)
DAYS_LEFT=$(( (EXPIRE_EPOCH - NOW_EPOCH) / 86400 ))

echo "Certificado expira em $DAYS_LEFT dias"

# Renovar se restam menos de 30 dias
if [ $DAYS_LEFT -lt 30 ]; then
    echo "Renovando certificado..."
    
    # Backup do certificado atual
    cp server.crt server.crt.backup.$(date +%Y%m%d)
    
    # Gerar novo certificado
    openssl req -new -x509 -key server.key -out server.crt -days 365 \
      -subj "/C=BR/ST=SP/L=SaoPaulo/O=MinhaEmpresa/OU=TI/CN=localhost"
    
    # Reiniciar servi√ßos
    systemctl reload nginx
    systemctl restart minha-aplicacao
    
    echo "Certificado renovado com sucesso!"
fi
                </div>

                <div class="code-example" data-language="javascript">
// Monitoramento de expira√ß√£o em Node.js
const fs = require('fs');
const forge = require('node-forge');

function checkCertExpiration(certPath) {
    const certPem = fs.readFileSync(certPath, 'utf8');
    const cert = forge.pki.certificateFromPem(certPem);
    
    const now = new Date();
    const expiry = cert.validity.notAfter;
    const daysLeft = Math.ceil((expiry - now) / (1000 * 60 * 60 * 24));
    
    console.log(`Certificado expira em ${daysLeft} dias`);
    
    if (daysLeft < 30) {
        console.warn('‚ö†Ô∏è Certificado expira em breve!');
        // Enviar alerta por email/Slack
        sendAlert(`Certificado ${certPath} expira em ${daysLeft} dias`);
    }
    
    return daysLeft;
}

// Verificar diariamente
setInterval(() => {
    checkCertExpiration('./server.crt');
}, 24 * 60 * 60 * 1000);
                </div>
            </div>

            <div class="tab-content" id="monitoring-tab">
                <h4>üìä Monitoramento Cont√≠nuo</h4>
                
                <div class="code-example" data-language="python">
import ssl
import socket
import datetime
import smtplib
from email.mime.text import MIMEText

def monitor_ssl_health(hostname, port=443):
    """Monitora sa√∫de do SSL"""
    try:
        # Conectar e obter certificado
        context = ssl.create_default_context()
        with socket.create_connection((hostname, port), timeout=10) as sock:
            with context.wrap_socket(sock, server_hostname=hostname) as ssock:
                cert = ssock.getpeercert()
                cipher = ssock.cipher()
                
                # Verificar expira√ß√£o
                expire_date = datetime.datetime.strptime(
                    cert['notAfter'], '%b %d %H:%M:%S %Y %Z'
                )
                days_left = (expire_date - datetime.datetime.now()).days
                
                # Verificar cipher
                is_secure_cipher = 'AES' in cipher[0] and 'SHA' in cipher[0]
                
                # Gerar relat√≥rio
                report = {
                    'hostname': hostname,
                    'port': port,
                    'days_until_expiry': days_left,
                    'cipher': cipher[0],
                    'is_secure': is_secure_cipher and days_left > 7,
                    'timestamp': datetime.datetime.now().isoformat()
                }
                
                # Alertas
                if days_left < 30:
                    send_alert(f"Certificado {hostname} expira em {days_left} dias")
                
                if not is_secure_cipher:
                    send_alert(f"Cipher inseguro detectado em {hostname}: {cipher[0]}")
                
                return report
                
    except Exception as e:
        send_alert(f"Erro ao verificar SSL {hostname}: {str(e)}")
        return {'error': str(e)}

# Executar monitoramento
if __name__ == "__main__":
    sites = ['localhost', 'meusite.com.br', 'api.meusite.com.br']
    for site in sites:
        report = monitor_ssl_health(site)
        print(f"SSL Report for {site}: {report}")
                </div>
            </div>

            <div class="tab-content" id="security-tab">
                <h4>üõ°Ô∏è Melhores Pr√°ticas de Seguran√ßa</h4>
                
                <div class="info-box">
                    <strong>Checklist de Seguran√ßa SSL:</strong><br>
                    ‚úÖ Usar apenas TLS 1.2 ou superior<br>
                    ‚úÖ Desabilitar ciphers fracos (RC4, MD5, DES)<br>
                    ‚úÖ Implementar HSTS (HTTP Strict Transport Security)<br>
                    ‚úÖ Usar certificados de CA confi√°veis<br>
                    ‚úÖ Implementar Certificate Pinning<br>
                    ‚úÖ Monitorar logs de seguran√ßa<br>
                    ‚úÖ Manter software atualizado
                </div>

                <div class="code-example" data-language="nginx">
# Configura√ß√£o Nginx segura
server {
    listen 443 ssl http2;
    server_name meusite.com.br;
    
    # Certificados
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/private.key;
    
    # Configura√ß√µes SSL seguras
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;
    ssl_prefer_server_ciphers off;
    
    # HSTS
    add_header Strict-Transport-Security "max-age=63072000" always;
    
    # OCSP Stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    
    # Session tickets
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;
}
                </div>

                <div class="code-example" data-language="javascript">
// Express.js com configura√ß√£o segura
const express = require('express');
const helmet = require('helmet');
const https = require('https');
const fs = require('fs');

const app = express();

// Headers de seguran√ßa
app.use(helmet({
    hsts: {
        maxAge: 31536000,
        includeSubDomains: true,
        preload: true
    }
}));

// Configura√ß√µes SSL
const sslOptions = {
    key: fs.readFileSync('private.key'),
    cert: fs.readFileSync('certificate.crt'),
    // Apenas protocolos seguros
    secureProtocol: 'TLSv1_2_method',
    // Ciphers seguros
    ciphers: [
        'ECDHE-RSA-AES128-GCM-SHA256',
        'ECDHE-RSA-AES256-GCM-SHA384',
        'ECDHE-RSA-AES128-SHA256',
        'ECDHE-RSA-AES256-SHA384'
    ].join(':'),
    honorCipherOrder: true
};

https.createServer(sslOptions, app).listen(443, () => {
    console.log('Servidor HTTPS seguro rodando na porta 443');
});
                </div>
            </div>

            <button class="simulate-btn" onclick="simulateStep5()">üîß Executar Verifica√ß√£o de Manuten√ß√£o</button>
            <div class="result-box" id="result5">
                <h4>‚úÖ Verifica√ß√£o de Manuten√ß√£o Conclu√≠da!</h4>
                <p><strong>Status Geral:</strong></p>
                <div class="security-indicator secure">üîí Certificados: 287 dias restantes</div>
                <div class="security-indicator secure">üìä Performance: Normal</div>
                <div class="security-indicator secure">üõ°Ô∏è Configura√ß√£o: Segura</div>
                <div class="security-indicator warning">‚ö†Ô∏è Pr√≥xima verifica√ß√£o: 24h</div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;

        function showStep(step) {
            // Esconder todas as etapas
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remover classe active de todos os bot√µes
            document.querySelectorAll('.step-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Mostrar etapa selecionada
            document.getElementById('step' + step).classList.add('active');
            document.querySelectorAll('.step-btn')[step - 1].classList.add('active');
            
            // Atualizar barra de progresso
            const progress = (step / 5) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            currentStep = step;
        }

        function showTab(tabId, button) {
            // Esconder todas as abas do grupo atual
            const tabContainer = button.closest('.step-content');
            tabContainer.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            tabContainer.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar aba selecionada
            document.getElementById(tabId).classList.add('active');
            button.classList.add('active');
        }

        function simulateStep1() {
            const result = document.getElementById('result1');
            result.classList.add('show');
            
            // Simular processo de gera√ß√£o
            setTimeout(() => {
                console.log('Certificado gerado com sucesso!');
            }, 1000);
        }

        function simulateStep2() {
            const result = document.getElementById('result2');
            result.classList.add('show');
            
            // Simular inicializa√ß√£o do servidor
            setTimeout(() => {
                console.log('Servidor SSL iniciado na porta 443');
            }, 1000);
        }

        function simulateStep3() {
            const result = document.getElementById('result3');
            result.classList.add('show');
            
            // Simular handshake SSL
            setTimeout(() => {
                console.log('Handshake SSL conclu√≠do com sucesso');
            }, 1500);
        }

        function simulateStep4() {
            const result = document.getElementById('result4');
            result.classList.add('show');
            
            // Simular execu√ß√£o de testes
            setTimeout(() => {
                console.log('Todos os testes SSL passaram');
            }, 2000);
        }

        function simulateStep5() {
            const result = document.getElementById('result5');
            result.classList.add('show');
            
            // Simular verifica√ß√£o de manuten√ß√£o
            setTimeout(() => {
                console.log('Verifica√ß√£o de manuten√ß√£o conclu√≠da');
            }, 1500);
        }

        // Inicializar primeira etapa
        showStep(1);
    </script>
</body>
</html>